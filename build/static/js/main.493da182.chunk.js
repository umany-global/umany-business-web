(this["webpackJsonpreact-base"]=this["webpackJsonpreact-base"]||[]).push([[0],{143:function(e){e.exports=JSON.parse('{"translation":{"welcome_to_react":"Welcome to React and react-i18next","login.phone":"Phone","login.password":"Password","login.sign_in":"Sign In","login.forgot":"Forgot Password?","login.have_account":"Don\'t have an account? Sign Up.","login.remember":"Remember me","auth/invalid-email":"The email address is badly formatted","auth/user-not-found":"This email doesn\'t exist","auth/wrong-password":"The password supplied is incorrect"}}')},144:function(e){e.exports=JSON.parse('{"translation":{"welcome_to_react":"Bienvenue \xe0 React et react-i18next","login.phone":"Telefono","login.password":"Contrase\xf1a","login.sign_in":"Iniciar Sesion","login.forgot":"Olvidaste tu contrase\xf1a?","login.have_account":"\xbfNo tienes una cuenta? Reg\xedstrate.","login.remember":"Recordar Contrase\xf1a","auth/invalid-email":"La direcci\xf3n de correo electr\xf3nico est\xe1 mal formateada","auth/user-not-found":"Este email no existe","auth/wrong-password":"La contrase\xf1a suministrada es incorrecta"}}')},145:function(e){e.exports=JSON.parse('{"translation":{"welcome_to_react":"Bienvenue \xe0 React et react-i18next","login.email":"E-mail","login.password":"Mot de passe","login.sign_in":"Connexion","login.forgot":"Vous avez oubli\xe9 votre mot de passe?","login.have_account":"Vous n\'avez pas de compte ? Inscrivez-vous.","login.remember":"Retenir le mot de passe","auth/invalid-email":"L\'adresse \xe9lectronique est mal format\xe9e","auth/user-not-found":"Le courrier \xe9lectronique n\'existe pas","auth/wrong-password":"Le mot de passe fourni est incorrect"}}')},162:function(e,t,n){},163:function(e,t,n){},245:function(e,t,n){"use strict";n.r(t);var a=n(8),r=n(0),o=n.n(r),c=n(14),s=n.n(c),i=(n(162),n(163),n(164),n(165),n(310)),u=n(308),l=n(53),p=n(142),d=n(31),h="handle_auth",b="set_login_auth",f="set_logout",m="set_message",g="get_brand",j="get_brand_orders",v="get_brand_transaction",x="home_brand_filter",O="home_project_filter",y="home_category_filter",w="home_report_filter",k="handle_error_msg",T="handle_phone_auth",_="handle_google_auth",C=n(26),P=n(18),A=n(6),I=n.n(A),S=n(13),E=n(77),R=n(78),B=n(48),L=n(88),N=n(87),U=n(61),D=n(294),W=n(7),F=n(20),V=(n(67),n(121),n(311)),H=n(293),M=n(292),z=n(291),G=n(89),K=n.p+"static/media/logo-umany.5708d036.png",q=n(100),J=n(79),Y=n.n(J),X={text:"",open:!1,type:""};var Z=Boolean(sessionStorage.getItem("umany-auth")),Q={loggedIn:Z,token:Z,authToken:"",fcmToken:"",user:{}},$=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_ENDPOINT:"https://meleeisland.umany.global/",REACT_APP_apiKey:"AIzaSyDcIUhSwWb_T5VqpyOqCZy0sMThwVkvjF8",REACT_APP_authDomain:"umany-global-dev.firebaseapp.com",REACT_APP_databaseURL:"https://umany-global-dev.firebaseio.com",REACT_APP_projectId:"umany-global-dev",REACT_APP_storageBucket:"umany-global-dev.appspot.com",REACT_APP_messagingSenderId:"282064679762",REACT_APP_appId:"1:282064679762:web:4ea04cf19458b5dd31008b",REACT_APP_measurementId:"G-SRYT72DWFV",REACT_APP_FCM_LABEL:"umany-fcm",REACT_APP_AUTH_LABEL:"umany-auth",REACT_APP_COOKIE_EXP:"1"}),ee=$.REACT_APP_FCM_LABEL,te=$.REACT_APP_AUTH_LABEL;var ne={dragger:!1,cookiexp:1,home:{brand:[],project:[],category:[],reports:[]}};var ae={validate:{checklist:[]},list:[],current:{},transaction:{}};var re,oe=n(122),ce=Object(U.d)(Object(U.b)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:var n=t.payload.authToken,r=Boolean(n);return console.log("loggedIn",r),Object(a.a)(Object(a.a)({},e),{},{authToken:n,loggedIn:r});case T:var o=t.authToken;return o&&sessionStorage.setItem(te,o),Object(a.a)(Object(a.a)({},e),{},{authToken:o,loggedIn:!0});case _:var c=t.authToken;return c&&sessionStorage.setItem(te,c),Object(a.a)(Object(a.a)({},e),{},{authToken:c,loggedIn:!0});case f:return sessionStorage.removeItem(te),Object(a.a)(Object(a.a)({},e),{},{authToken:"",loggedIn:!1});case h:var s=t.payload,i=s.fcmToken,u=s.authToken;return i&&sessionStorage.setItem(ee,i),u&&sessionStorage.setItem(te,u),Object(a.a)(Object(a.a)({},e),t.payload);default:return e}},dashboard:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return Object(a.a)(Object(a.a)({},e),{},{home:Object(a.a)(Object(a.a)({},e.home),{},{reports:t.list})});case x:return Object(a.a)(Object(a.a)({},e),{},{home:Object(a.a)(Object(a.a)({},e.home),{},{brand:t.list})});case O:return Object(a.a)(Object(a.a)({},e),{},{home:Object(a.a)(Object(a.a)({},e.home),{},{project:t.list})});case y:return Object(a.a)(Object(a.a)({},e),{},{home:Object(a.a)(Object(a.a)({},e.home),{},{category:t.list})});default:return e}},message:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return Object(a.a)(Object(a.a)({},e),t.payload);case k:return Object(a.a)(Object(a.a)({},e),{},{type:"error",open:!0,text:t.message});default:return e}},brands:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(a.a)(Object(a.a)({},e),{},{transaction:t.payload});case j:return Object(a.a)(Object(a.a)({},e),{},{list:t.list});case g:return Object(a.a)(Object(a.a)({},e),{},{current:t.list[0]});default:return e}}}),Object(U.a)((function(e){return function(t){return function(n){var a=t(n);return console.log("next state :>> ",e.getState()),a}}}),oe.a)),se=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_ENDPOINT:"https://meleeisland.umany.global/",REACT_APP_apiKey:"AIzaSyDcIUhSwWb_T5VqpyOqCZy0sMThwVkvjF8",REACT_APP_authDomain:"umany-global-dev.firebaseapp.com",REACT_APP_databaseURL:"https://umany-global-dev.firebaseio.com",REACT_APP_projectId:"umany-global-dev",REACT_APP_storageBucket:"umany-global-dev.appspot.com",REACT_APP_messagingSenderId:"282064679762",REACT_APP_appId:"1:282064679762:web:4ea04cf19458b5dd31008b",REACT_APP_measurementId:"G-SRYT72DWFV",REACT_APP_FCM_LABEL:"umany-fcm",REACT_APP_AUTH_LABEL:"umany-auth",REACT_APP_COOKIE_EXP:"1"}),ie=se.REACT_APP_FCM_LABEL,ue=se.REACT_APP_AUTH_LABEL,le=Y.a.create({baseURL:"https://meleeisland.umany.global/",headers:{"Content-Type":"application/json"}});(re=le).interceptors.request.use((function(e){var t=sessionStorage.getItem(ue),n=sessionStorage.getItem(ie);return e.headers["Umany-ai"]=n,console.log("config.headers",e.headers),t&&(e.headers.Authorization=t),e}),(function(e){return Promise.reject(e)})),re.interceptors.response.use((function(e){return console.log("response :>> ",e),e}),(function(e){if(e&&e.response){var t=e.response,n=t.status,a=t.data;[401,403].indexOf(n)>=0&&ce.dispatch({type:f}),e={status:n,message:a.error.message},ce.dispatch({type:k,message:e.message})}return Promise.reject(e)}));var pe=le,de={loginPhone:function(e){return pe({method:"POST",url:"/login/",data:e})},validClientToken:function(e){var t=e.fcmToken,n=e.phone_token,a=e.authToken,r=e.phone_number;return console.log("data",e,a),pe({method:"post",url:"/clients",headers:{"Content-Type":"application/json","Umany-ai":t,"Umany-sc":n,Authorization:a},data:{device:{vendor_id:"123",type:"mobile",brand:"",model:"",os:{name:"",version:""},phone_number:r,mac_address:"D4:3B:04:5A:A2:C6",imei:""},app:{platform:"",version:"",build:""}}})}},he=n(309),be=Object(W.a)((function(e){return{input:{borderRadius:20,position:"relative",backgroundColor:e.palette.common.white,border:"1px solid #ced4da",fontSize:16,marginRight:"10px",padding:"10px 12px",boxShadow:"-2px 4px 1px #cccccc",transition:e.transitions.create(["border-color","box-shadow"]),fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(",")}}}))(he.a),fe=n(2),me=function(e){Object(L.a)(n,e);var t=Object(N.a)(n);function n(e){var a;return Object(E.a)(this,n),(a=t.call(this,e)).state={position:!1,phone:"",password:"",valid:{msg:"",open:!1}},a.handleViewPosition=a.handleViewPosition.bind(Object(B.a)(a)),a.handleChange=a.handleChange.bind(Object(B.a)(a)),a.handleAuth=a.handleAuth.bind(Object(B.a)(a)),a.loginWithToken=a.loginWithToken.bind(Object(B.a)(a)),a.handleCloseMsg=a.handleCloseMsg.bind(Object(B.a)(a)),a.handleFirebase(),a}return Object(R.a)(n,[{key:"handleViewPosition",value:function(e){this.setState({position:e})}},{key:"handleFirebase",value:function(){var e=Object(S.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.a.messaging().requestPermission();case 2:return e.next=4,F.a.messaging().getToken();case 4:t=e.sent,console.log("fcmToken",t),this.props.auth_token({fcmToken:t});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleCloseMsg",value:function(){var e=Object(S.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({valid:{open:!1}});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loginWithToken",value:function(){var e=Object(S.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(S.a)(I.a.mark((function e(n,a){var r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F.a.auth().signInWithCustomToken(t.id_token);case 3:return r=e.sent,e.abrupt("return",n(r));case 7:return e.prev=7,e.t0=e.catch(0),console.log("error :>> ",e.t0),e.abrupt("return",a(e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithUmany",value:function(){var e=Object(S.a)(I.a.mark((function e(t,n,a){var r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=JSON.stringify({phone:t,password:n}),e.abrupt("return",new Promise(function(){var e=Object(S.a)(I.a.mark((function e(t,n){var a,o;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={method:"post",url:"/login",data:r},e.next=4,pe(a);case 4:return o=e.sent,e.abrupt("return",t(o));case 8:return e.prev=8,e.t0=e.catch(0),console.log("error :>> ",e.t0),e.abrupt("return",n(e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"validClientToken",value:function(){var e=Object(S.a)(I.a.mark((function e(t,n,a,r){var o=this;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(S.a)(I.a.mark((function e(c,s){var i,u;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i={method:"post",url:"/clients",headers:{"Content-Type":"application/json","Umany-ai":a,"Umany-sc":t,Authorization:n},data:{device:{vendor_id:"123",type:"mobile",brand:"",model:"",os:{name:"",version:""},phone_number:r,mac_address:"D4:3B:04:5A:A2:C6",imei:""},app:{platform:"",version:"",build:""}}},e.next=4,pe(i);case 4:return u=e.sent,e.abrupt("return",c(u));case 8:return e.prev=8,e.t0=e.catch(0),o.props.auth_token({authToken:""}),e.abrupt("return",s(e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}()},{key:"getMe",value:function(){var e=Object(S.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.a.auth().currentUser.getIdToken();case 2:return pe.defaults.headers.common.Authorization=e.sent,e.t0=t,e.next=6,F.a.auth().currentUser.getIdToken();case 6:return e.t1=e.sent,e.t2={"Content-Type":"application/json","Umany-ai":e.t0,Authorization:e.t1},e.t3={get:e.t2},n={method:"get",url:"https://meleeisland.umany.global/me",headers:e.t3},e.abrupt("return",new Promise(function(){var e=Object(S.a)(I.a.mark((function e(t,a){var r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Y()(n);case 3:return r=e.sent,e.abrupt("return",t(r));case 7:return e.prev=7,e.t0=e.catch(0),console.log("error :>> ",e.t0),e.abrupt("return",a(e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}()));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleAuth",value:function(){var e=Object(S.a)(I.a.mark((function e(){var t,n,a,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object.assign({},this.state),n=t.phone,a=t.password,e.prev=1,r=this.props.fcmToken,e.next=5,this.props.logout({authToken:""});case 5:return e.next=7,this.props.handlePhoneLogin({phone:n,password:a,fcmToken:r});case 7:e.next=11;break;case 9:e.prev=9,e.t0=e.catch(1);case 11:case"end":return e.stop()}}),e,this,[[1,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"handleAuthProvider",value:function(){var e=Object(S.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=this.props.fcmToken,e.next=4,this.props.logout({authToken:""});case 4:return e.next=6,this.props.handleProviderLogin({fcmToken:n,provider:t});case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e){var t={};t[e.target.name]=e.target.value,console.log("data :>> ",t),this.setState(t)}},{key:"render",value:function(){var e=this,t=function(){return Object(fe.jsx)(i.a,{open:e.state.valid.open,autoHideDuration:6e3,onClose:function(){e.handleCloseMsg()},message:e.state.valid.msg})},n=this.props,a=n.classes;n.t;return Object(fe.jsxs)(z.a,{container:!0,component:"main",className:a.root,children:[Object(fe.jsx)(M.a,{}),Object(fe.jsx)(t,{open:this.state.valid.open}),this.state.position?Object(fe.jsx)(z.a,{container:!0,direction:"row",justify:"center",alignItems:"center",children:Object(fe.jsx)(z.a,{item:!0,md:4,elevation:2,children:Object(fe.jsxs)("div",{className:a.paper,children:[Object(fe.jsxs)(z.a,{container:!0,direction:"row",justify:"center",alignItems:"center",style:{flexDirection:"row",flexWrap:"initial"},children:[Object(fe.jsx)("img",{src:K,alt:"",style:{width:70}}),Object(fe.jsx)(G.a,{component:"h2",align:"left",variant:"body1",children:"Ingresa con tu telefono y contrase\xf1a"})]}),Object(fe.jsxs)("form",{className:a.form,noValidate:!0,children:[Object(fe.jsxs)(z.a,{container:!0,justify:"center",alignItems:"flex-start",style:{flexDirection:"column",flexWrap:"initial"},children:[Object(fe.jsx)(V.a,{children:"Tel\xe9fono: +54 (11) 0000-0000"}),Object(fe.jsxs)(z.a,{container:!0,justify:"center",alignItems:"center",style:{flexDirection:"row",flexWrap:"initial"},children:[Object(fe.jsx)(be,{placeholder:"+54",disabled:!0,style:{width:90}}),Object(fe.jsx)(be,{value:this.state.phone,name:"phone",onChange:this.handleChange,style:{width:"100%"},placeholder:"(11) 1234-5678"})]})]}),Object(fe.jsxs)(z.a,{container:!0,justify:"center",alignItems:"flex-start",style:{marginTop:10,flexDirection:"column",flexWrap:"initial"},children:[Object(fe.jsx)(V.a,{children:"Contrase\xf1a"}),Object(fe.jsx)(be,{value:this.state.password,name:"password",type:"password",onChange:this.handleChange,style:{width:"100%"},placeholder:"Contrase\xf1a"})]})]}),Object(fe.jsxs)(z.a,{container:!0,direction:"row",justify:"center",alignItems:"center",children:[Object(fe.jsx)(H.a,{onClick:function(){e.handleAuth(!0)},variant:"contained",color:"secondary",children:"Entr\xe1r"}),Object(fe.jsx)(H.a,{onClick:function(){e.handleViewPosition()},variant:"contained",children:"Volver"})]})]})})}):Object(fe.jsx)(z.a,{container:!0,direction:"row",justify:"center",alignItems:"center",children:Object(fe.jsx)(z.a,{item:!0,md:4,elevation:2,children:Object(fe.jsxs)("div",{className:a.paper,children:[Object(fe.jsx)("img",{src:K,alt:"",style:{width:100}}),Object(fe.jsx)(G.a,{component:"h1",variant:"h5",children:"Bienvenido a Umany"}),Object(fe.jsxs)("form",{className:a.form,noValidate:!0,children:[Object(fe.jsx)(H.a,{fullWidth:!0,variant:"contained",onClick:function(){e.handleAuthProvider("GoogleAuthProvider")},className:a.submit,startIcon:Object(fe.jsx)(q.a,{icon:["fab","google"]}),children:"Entr\xe1 con Google"}),Object(fe.jsx)(H.a,{fullWidth:!0,variant:"contained",onClick:function(){e.handleAuthProvider("FacebookAuthProvider")},className:a.submit,startIcon:Object(fe.jsx)(q.a,{icon:["fab","facebook-f"]}),children:"Entr\xe1 con Facebook"})]}),Object(fe.jsxs)(z.a,{container:!0,direction:"row",justify:"center",alignItems:"center",children:[Object(fe.jsx)(H.a,{onClick:function(){e.handleViewPosition("byphone")},variant:"contained",color:"secondary",children:"Entr\xe1r"}),Object(fe.jsx)(H.a,{variant:"contained",color:"secondary",children:"Crea Cuenta"})]})]})})})]})}}]),n}(o.a.Component),ge=Object(U.c)(Object(D.a)()(Object(d.b)((function(e){return e.auth}),(function(e){return{handleProviderLogin:function(t){e(function(e){return function(){var t=Object(S.a)(I.a.mark((function t(n){var a,r,o,c,s,i;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=new F.a.auth[e.provider],t.prev=1,t.next=4,F.a.auth().signInWithPopup(a);case 4:return r=t.sent,t.next=7,F.a.auth().signInWithCredential(r.credential);case 7:return o=t.sent,t.next=10,o.user.getIdToken(!0);case 10:return c=t.sent,t.next=13,F.a.auth().currentUser.getIdToken();case 13:return s=t.sent,t.next=16,F.a.messaging().getToken();case 16:return i=t.sent,console.log("fcmToken",i),t.next=20,de.validClientToken({phone_token:c,authToken:s,fcmToken:i});case 20:console.log("result",o),n({type:_,authToken:s}),t.next=27;break;case 24:t.prev=24,t.t0=t.catch(1),console.log("error :>> ",t.t0);case 27:case"end":return t.stop()}}),t,null,[[1,24]])})));return function(e){return t.apply(this,arguments)}}()}(t))},handlePhoneLogin:function(t){e(function(e){return function(){var t=Object(S.a)(I.a.mark((function t(n){var a,r,o,c;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,de.loginPhone(e);case 3:return a=t.sent,t.next=6,F.a.auth().signInWithCustomToken(a.data);case 6:return a=t.sent,t.next=9,a.user.getIdToken(!0);case 9:return r=t.sent,t.next=12,F.a.auth().currentUser.getIdToken();case 12:return o=t.sent,t.next=15,F.a.messaging().getToken();case 15:return c=t.sent,t.next=18,de.validClientToken({phone_token:r,authToken:o,phone_number:e.phone,fcmToken:c});case 18:n({type:T,payload:a.data,authToken:o}),t.next=24;break;case 21:t.prev=21,t.t0=t.catch(0),console.log("error",t.t0);case 24:case"end":return t.stop()}}),t,null,[[0,21]])})));return function(e){return t.apply(this,arguments)}}()}(t))},logout:function(){e({type:f})},auth_token:function(t){e({type:h,payload:Object(a.a)({},t)})}}}))(Object(W.a)((function(e){return{root:{"&::before":{content:'""',position:"absolute",display:"block",left:"-10%",backgroundImage:"url(".concat(K,")"),opacity:.1,backgroundSize:"100%",backgroundRepeat:"no-repeat",backgroundPosition:"center",filter:"grayscale(100%)",height:"100vh",width:"100vw"},height:"100vh"},image:{backgroundImage:"url(https://source.unsplash.com/random)",backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",float:"left",margin:e.spacing(4)},submit:{backgroundColor:"white"}}}),{withTheme:!0})(me)))),je=function(e){Object(L.a)(n,e);var t=Object(N.a)(n);function n(){return Object(E.a)(this,n),t.apply(this,arguments)}return Object(R.a)(n,[{key:"render",value:function(){return Object(fe.jsx)("div",{children:Object(fe.jsx)("h1",{children:"Forgot"})})}}]),n}(o.a.Component);n(127);var ve=function(){return Object(fe.jsx)(C.a,{children:Object(fe.jsxs)(P.d,{children:[Object(fe.jsx)(P.b,{path:"/",exact:!0,component:ge}),Object(fe.jsx)(P.b,{path:"/forgot",exact:!0,component:je}),Object(fe.jsx)(P.a,{to:"/"})]})})},xe=n(148),Oe=n(5),ye=n(130),we=(n(295),n(296),n(297),n(298),n(131),n(132),n(133),n(134),n(135),n(136),n(137),n(299)),ke=n(307),Te=n(300),_e=n(301),Ce=n(312),Pe=n(313),Ae=n(304),Ie=n(302),Se=n(305),Ee={getValidationChecklist:function(e){return new Promise(function(){var t=Object(S.a)(I.a.mark((function t(n,a){var r;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,pe({method:"POST",url:"/brands/".concat(e,"/verify/"),data:{simulate:!0}});case 3:return r=t.sent,t.abrupt("return",n(r));case 7:return t.prev=7,t.t0=t.catch(0),console.log("error :>> ",t.t0),t.abrupt("return",a(t.t0));case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,n){return t.apply(this,arguments)}}())},getBrandTransaction:function(e){return new Promise(function(){var t=Object(S.a)(I.a.mark((function t(n,a){var r;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,pe({method:"GET",url:"/transactions/".concat(e,"/")});case 3:return r=t.sent,console.log("response getBrandTransaction",r),t.abrupt("return",n(r));case 8:return t.prev=8,t.t0=t.catch(0),console.log("error :>> ",t.t0),t.abrupt("return",a(t.t0));case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,n){return t.apply(this,arguments)}}())},getTransactionList:function(){return new Promise(function(){var e=Object(S.a)(I.a.mark((function e(t,n){var a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pe({method:"GET",url:"/transactions/"});case 3:return a=e.sent,e.abrupt("return",t(a));case 7:return e.prev=7,e.t0=e.catch(0),console.log("error :>> ",e.t0),e.abrupt("return",n(e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}())},getBrandList:function(e){return new Promise(function(){var t=Object(S.a)(I.a.mark((function t(n,a){var r;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,pe({method:"GET",url:"/accounts/brands/",data:e});case 3:return r=t.sent,t.abrupt("return",n(r));case 7:return t.prev=7,t.t0=t.catch(0),console.log("error :>> ",t.t0),t.abrupt("return",a(t.t0));case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,n){return t.apply(this,arguments)}}())},newRedeem:function(e){var t=e.brandId,n=e.transactionId;return new Promise(function(){var e=Object(S.a)(I.a.mark((function e(a,r){var o;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pe({method:"POST",url:"/brands/".concat(t,"/redeem/").concat(n,"/")});case 3:return o=e.sent,e.abrupt("return",a(o));case 7:return e.prev=7,e.t0=e.catch(0),console.log("error :>> ",e.t0),e.abrupt("return",r(e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}())},editBrand:function(e,t){return new Promise(function(){var n=Object(S.a)(I.a.mark((function n(a,r){var o,c;return I.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,o=new FormData,Object.keys(t).map((function(e){return o.append(e,t[e])})),n.next=6,pe({method:"PATCH",url:"/accounts/brands/".concat(e,"/"),headers:{"Content-Type":"image/jpeg"},data:o});case 6:return c=n.sent,n.abrupt("return",a(c));case 10:return n.prev=10,n.t0=n.catch(0),console.log("error :>> ",n.t0),n.abrupt("return",r(n.t0));case 14:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e,t){return n.apply(this,arguments)}}())},getBrands:function(e){return new Promise(function(){var t=Object(S.a)(I.a.mark((function t(n,a){var r;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,pe({method:"GET",url:"/brands",params:e});case 3:return r=t.sent,t.abrupt("return",n(r));case 7:return t.prev=7,t.t0=t.catch(0),console.log("error :>> ",t.t0),t.abrupt("return",a(t.t0));case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,n){return t.apply(this,arguments)}}())},taxes:function(e){return new Promise(function(){var t=Object(S.a)(I.a.mark((function t(n,a){var r;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,pe({method:"POST",url:"/brands/".concat(e.id,"/certificates/taxes/"),headers:{"Content-Type":"image/jpeg"},data:e.file});case 3:return r=t.sent,t.abrupt("return",n(r));case 7:return t.prev=7,t.t0=t.catch(0),console.log("error :>> ",t.t0),t.abrupt("return",a(t.t0));case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,n){return t.apply(this,arguments)}}())}},Re=n(138),Be=n.n(Re),Le=n(141),Ne=n.n(Le),Ue=n(140),De=n.n(Ue),We=Object(we.a)((function(e){return{root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:Object(a.a)({display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 8px"},e.mixins.toolbar),appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:{overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:0},appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}})),Fe=Object(d.b)((function(e){return e.auth}),(function(e){return{initBrand:function(t){var n;e((n=t,function(){var e=Object(S.a)(I.a.mark((function e(t){var a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ee.getBrands(n);case 3:a=e.sent,t({type:g,list:a.data.data}),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}}}))((function(e){var t=e.children,n=e.dispatch,a=e.initBrand,r=We(),c=o.a.useState(!1),s=Object(xe.a)(c,2),i=s[0],u=s[1];o.a.useEffect((function(){a()}),[]);Object(Oe.a)(r.paper,r.fixedHeight);return Object(fe.jsxs)("div",{className:r.root,children:[Object(fe.jsx)(M.a,{}),Object(fe.jsx)(Te.a,{position:"absolute",className:Object(Oe.a)(r.appBar,i&&r.appBarShift),children:Object(fe.jsxs)(_e.a,{className:r.toolbar,children:[Object(fe.jsx)(Ie.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:function(){u(!0)},className:Object(Oe.a)(r.menuButton,i&&r.menuButtonHidden),children:Object(fe.jsx)(Be.a,{})}),Object(fe.jsxs)(z.a,{container:!0,justify:"space-between",style:{margin:"0 20px"},children:[Object(fe.jsx)(G.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,children:"Umany empresas"}),Object(fe.jsx)(Ie.a,{onClick:function(){Object(ye.confirmAlert)({title:"Umany info",message:"Are you sure to logout.",buttons:[{label:"Yes",onClick:function(){var e=Object(S.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.a.auth().signOut();case 2:n({type:f,payload:{}});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{label:"No"}]})},"aria-label":"show 17 new notifications",color:"inherit",children:Object(fe.jsx)(Ce.a,{title:"Logout","aria-label":"add",children:Object(fe.jsx)(De.a,{})})})]})]})}),Object(fe.jsxs)(ke.a,{variant:"permanent",classes:{paper:Object(Oe.a)(r.drawerPaper,!i&&r.drawerPaperClose)},open:i,children:[Object(fe.jsxs)("div",{className:r.toolbarIcon,children:[Object(fe.jsxs)(z.a,{container:!0,justify:"flex-start",alignItems:"center",wrap:"nowrap",children:[Object(fe.jsx)(Pe.a,{alt:"Remy Sharp",src:K}),Object(fe.jsx)(G.a,{component:"h1",variant:"h6",noWrap:!0,children:"Umany"})]}),Object(fe.jsx)(Ie.a,{onClick:function(){u(!1)},children:Object(fe.jsx)(Ne.a,{})})]}),Object(fe.jsx)(Ae.a,{})]}),Object(fe.jsxs)("main",{className:r.content,children:[Object(fe.jsx)("div",{className:r.appBarSpacer}),Object(fe.jsx)(Se.a,{maxWidth:"lg",className:r.container,children:Object(fe.jsx)(z.a,{container:!0,spacing:3,children:Object(fe.jsx)(z.a,{item:!0,xs:12,children:t})})})]})]})})),Ve=n(47),He=n(86),Me=Object(we.a)((function(e){var t;return{root:{flexGrow:1},labelW:{width:100,display:"block",textAlign:"right"},container:{flexGrow:1,maxHeight:440},circleContent:(t={},Object(Ve.a)(t,e.breakpoints.down("xs"),{display:"none"}),Object(Ve.a)(t,"padding",e.spacing(4)),t),tabContent:{flexGrow:1,padding:e.spacing(4)}}})),ze=Object(d.b)((function(e){return{brand:e.brands}}),(function(e){return{initBrandList:function(t){e(function(e){return function(){var t=Object(S.a)(I.a.mark((function t(n){var a;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ee.getTransactionList(e);case 3:a=t.sent,n({type:j,list:a.data.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("error :>> ",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}(t))}}}))((function(e){var t=e.brand,n=e.initBrandList,a=(Object(P.g)(),Me());o.a.useEffect((function(){t.current.id&&(console.log("brand.current",t.current),n(t.current.brand.id))}),[t.current.id]);var r=He.Components.UmanyList;return Object(fe.jsx)(z.a,{container:!0,className:a.root,children:Object(fe.jsx)(z.a,{item:!0,xs:12,className:a.tabContent,children:Object(fe.jsx)(r,{items:t.list})})})})),Ge=Object(we.a)((function(e){var t;return{root:{flexGrow:1},labelW:{width:100,display:"block",textAlign:"right"},container:{flexGrow:1,maxHeight:440},circleContent:(t={},Object(Ve.a)(t,e.breakpoints.down("xs"),{display:"none"}),Object(Ve.a)(t,"padding",e.spacing(4)),t),tabContent:{flexGrow:1,padding:e.spacing(4)}}})),Ke=Object(d.b)((function(e){return{brand:e.brands}}),(function(e){return{handleTransaction:function(t){e(function(e){return console.log("transactionId",e),function(){var t=Object(S.a)(I.a.mark((function t(n){var a;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ee.getBrandTransaction(e);case 3:a=t.sent,console.log("getBrandTransaction response",a),n({type:v,payload:a.data}),t.next=10;break;case 8:t.prev=8,t.t0=t.catch(0);case 10:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}(t))},handleMessage:function(t){e({type:m,payload:{text:t,open:!0,type:"success"}})}}}))((function(e){var t=e.brand,n=e.handleTransaction,a=e.handleMessage,r=Object(P.g)(),c=Ge(),s=Object(P.h)().transactionId;o.a.useEffect((function(){s?n(s):r.push("/")}),[]);var i=Object.assign(t.transaction,{}),u=He.Components.PromoBox;return Object(fe.jsx)(z.a,{container:!0,className:c.root,children:Object(fe.jsx)(z.a,{container:!0,justify:"center",children:Object(fe.jsx)(z.a,{item:!0,md:4,children:i.id&&t.current.id?Object(fe.jsx)(u,{item:i,brand:t.current.brand,confirmation:function(e){e?Ee.newRedeem({brandId:t.current.brand.id,transactionId:i.id}).then((function(e){a("El descuento se ha aplicado correctamente"),r.push("/")})).catch((function(){r.push("/")})):r.push("/")}}):null})})})})),qe=function(){return Object(fe.jsx)(C.a,{children:Object(fe.jsx)(Fe,{children:Object(fe.jsxs)(P.d,{children:[Object(fe.jsx)(P.b,{path:"/",exact:!0,component:ze}),Object(fe.jsx)(P.b,{path:"/:transactionId",exact:!0,component:Ke}),Object(fe.jsx)(P.a,{to:"/"})]})})})};l.b.add(p.a);var Je=Object(d.b)((function(e){return{auth:e.auth,message:e.message,brands:e.brands}}),(function(e){return{handleClose:function(t){e({type:m,payload:t})}}}))((function(e){var t=e.auth,n=e.message,r=e.handleClose;console.log("message",n);var o=t.loggedIn,c=n.text,s=n.open,l=void 0===s||s,p=n.time,d=void 0===p?6e3:p,h=n.type,b=void 0===h?"success":h;return Object(fe.jsxs)("div",{className:"App",children:[Object(fe.jsx)(i.a,{open:l,autoHideDuration:d,onClose:function(){r(Object(a.a)(Object(a.a)({},n),{},{open:!1}))},children:Object(fe.jsx)(u.a,{severity:b,onClose:function(){r(Object(a.a)(Object(a.a)({},n),{},{open:!1}))},children:c})}),o?Object(fe.jsx)(qe,{}):Object(fe.jsx)(ve,{})]})})),Ye=n(103),Xe=n(64),Ze={eng:n(143),spa:n(144),fra:n(145)};Ye.a.use(Xe.e).init({resources:Ze,lng:"spa",keySeparator:!1,interpolation:{escapeValue:!1},fallbackLng:"eng",debug:!1});Ye.a;var Qe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,315)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),o(e),c(e)}))},$e=n(306),et=n(149),tt=n(147),nt=n(314),at=Object(tt.a)({overrides:{MuiButton:{root:{borderRadius:"20px",margin:"5px"}},MuiAppBar:{root:{color:"#ffff !important",backgroundColor:"#61ccdb !important"}},MuiInputLabel:{root:{margin:"10px"}}},palette:{text:{primary:"#808080"},primary:{main:"#371880"},secondary:{main:"#fbac03",contrastText:"#fff"},companyBlue:{main:"#65CFE9",contrastText:"#fff"},companyDefault:{main:"#808080",contrastText:"#fff"}}}),rt=at=Object(nt.a)(at);s.a.render(Object(fe.jsx)(o.a.StrictMode,{children:Object(fe.jsx)(et.a,Object(a.a)(Object(a.a)({firebase:F.a},{apiKey:"AIzaSyDcIUhSwWb_T5VqpyOqCZy0sMThwVkvjF8",authDomain:"umany-global-dev.firebaseapp.com",projectId:"umany-global-dev",storageBucket:"umany-global-dev.appspot.com",messagingSenderId:"282064679762",appId:"1:282064679762:web:4ea04cf19458b5dd31008b",measurementId:"G-SRYT72DWFV"}),{},{children:Object(fe.jsx)(d.a,{store:ce,children:Object(fe.jsx)($e.a,{theme:rt,children:Object(fe.jsx)(Je,{})})})}))}),document.getElementById("root")),Qe()}},[[245,1,2]]]);
//# sourceMappingURL=main.493da182.chunk.js.map